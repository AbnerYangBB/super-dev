# AGENTS 协作规范

## 1) 沟通与基本原则
1. 注释、分析、回复统一使用中文，技术术语可保留英文。
2. 正常情况下优先复用现有能力：`MCP` > `skills` > 临时脚本。
3. 读取遵循最小必要原则，避免无差别全量扫描。

## 2) `serena` 激活规则（按需）
1. 不在会话启动时强制激活 `serena`。
2. 首次执行“影响面分析与调用链定位”前，先检查 `serena` 是否激活。
3. 未激活时，按顺序调用：
   `serena.activate_project` -> `serena.check_onboarding_performed` -> `serena.initial_instructions`。

## 3) 分析
1. 影响面分析与调用链定位使用 `serena`（文件、符号、引用）。
2. 不确定 API 或框架用法时，使用 `context7` 校验，优先官方文档。
3. 复杂问题（多约束、方案冲突、边界不清）可选的优先使用相关的`Skill`, 其次用 `sequential-thinking` mcp 进行拆解。

## 4) iOS 构建与运行
1. 此项目优先使用 `xcode-builder`构建, 完成较复杂功能时再进行构建, 简单的任务可不构建.
2. 运行 App 使用 `ios-device-runner` skill，默认真机运行。

## 5) 本地化与提交
1. 提交代码时，若涉及用户可见文案变更，必须使用 `sync-add-ios-loc` skill。
2. 本地化同步要求：`zh-Hans` 基准、按 key 增量更新、禁止整文件重排覆盖历史翻译。
3. 提交信息遵循仓库既有风格（如 `feat/fix/bugfix/refactor`），内容不超过 20 个字。

## 6) 交付输出规范
1. 明确说明：改了什么、为什么改、影响哪些文件。
2. 明确说明：执行了哪些验证（编译/运行/测试）以及结果。
3. 明确说明：未执行项及原因（工具缺失、设备不可用、权限限制等）。
